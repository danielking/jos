(function() {
  var jos;

  jos = angular.module('jos');

  jos.controller('SessionController', [
    '$scope', function($scope) {
      var apikey, init;
      apikey = '39zfXGjOxb0RfRhdOoFrXh08';
      baidu.frontia.init(apikey);
      baidu.frontia.social.setLoginCallback({
        success: function(user) {
          return $scope.$apply(function() {
            return $scope.$root.user = {
              name: user.getName(),
              mediaType: user.getMediaType()
            };
          });
        },
        error: function(error) {
          console.log(error);
          return $scope.$root.user = null;
        }
      });
      init = function() {
        var user;
        user = baidu.frontia.getCurrentAccount();
        if (!user || user.getType() !== 'user') {

        } else {
          return $scope.$root.user = {
            name: user.getName(),
            mediaType: user.getMediaType(),
            accessToken: user.getAccessToken()
          };
        }
      };
      $scope.$root.user = null;
      $scope.login = function(mediaType) {
        var options;
        options = {
          response_type: 'token',
          media_type: mediaType || 'baidu',
          redirect_uri: (window.location.hostname = '127.0.0.1') ? 'http://127.0.0.1:7890/debug' : window.location.hostname === 'jos.jedisto.com' ? 'http://jos.jedisto.com' : window.location.hostname === 'danielking.github.io' ? 'http://danielking.github.io/jos' : void 0,
          client_type: 'web',
          scope: 'netdisk'
        };
        return baidu.frontia.social.login(options);
      };
      $scope.$root.logout = function() {
        return bootbox.confirm('Confirmed to logout?', function(confirmed) {
          if (confirmed) {
            return $scope.$apply(function() {
              window.location = '#';
              baidu.frontia.logOutCurrentAccount();
              return $scope.$root.user = null;
            });
          }
        });
      };
      $scope.list = function() {
        return baidu.frontia.personalStorage.listFile('/apps/jedios/', {
          success: function(data) {
            return console.log(data);
          },
          error: function(error) {
            return console.log(error);
          }
        });
      };
      $scope.test = function() {
        return baidu.frontia.personalStorage.makeDir('/apps/jedios/hello', {
          success: function(data) {
            return console.log(data);
          },
          error: function(error) {
            return console.log(error);
          }
        });
      };
      return init();
    }
  ]);

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXJzXFxzZXNzaW9uLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBLE1BQUEsR0FBQTs7QUFBQSxFQUFBLEdBQUEsR0FBTSxPQUFPLENBQUMsTUFBUixDQUFlLEtBQWYsQ0FBTixDQUFBOztBQUFBLEVBQ0EsR0FBRyxDQUFDLFVBQUosQ0FBZSxtQkFBZixFQUFvQztJQUNuQyxRQURtQyxFQUVuQyxTQUFDLE1BQUQsR0FBQTtBQUNDLFVBQUEsWUFBQTtBQUFBLE1BQUEsTUFBQSxHQUFTLDBCQUFULENBQUE7QUFBQSxNQUNBLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBZCxDQUFtQixNQUFuQixDQURBLENBQUE7QUFBQSxNQUVBLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLGdCQUFyQixDQUNDO0FBQUEsUUFBQSxPQUFBLEVBQVMsU0FBQyxJQUFELEdBQUE7aUJBQ1IsTUFBTSxDQUFDLE1BQVAsQ0FBYyxTQUFBLEdBQUE7bUJBQ2IsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFiLEdBQ0M7QUFBQSxjQUFBLElBQUEsRUFBTSxJQUFJLENBQUMsT0FBTCxDQUFBLENBQU47QUFBQSxjQUNBLFNBQUEsRUFBVyxJQUFJLENBQUMsWUFBTCxDQUFBLENBRFg7Y0FGWTtVQUFBLENBQWQsRUFEUTtRQUFBLENBQVQ7QUFBQSxRQUtBLEtBQUEsRUFBTyxTQUFDLEtBQUQsR0FBQTtBQUNOLFVBQUEsT0FBTyxDQUFDLEdBQVIsQ0FBWSxLQUFaLENBQUEsQ0FBQTtpQkFDQSxNQUFNLENBQUMsS0FBSyxDQUFDLElBQWIsR0FBb0IsS0FGZDtRQUFBLENBTFA7T0FERCxDQUZBLENBQUE7QUFBQSxNQVlBLElBQUEsR0FBTyxTQUFBLEdBQUE7QUFDTixZQUFBLElBQUE7QUFBQSxRQUFBLElBQUEsR0FBTyxLQUFLLENBQUMsT0FBTyxDQUFDLGlCQUFkLENBQUEsQ0FBUCxDQUFBO0FBQ0EsUUFBQSxJQUFHLENBQUEsSUFBQSxJQUFTLElBQUks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dCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsiam9zID0gYW5ndWxhci5tb2R1bGUgJ2pvcydcclxuam9zLmNvbnRyb2xsZXIgJ1Nlc3Npb25Db250cm9sbGVyJywgW1xyXG5cdCckc2NvcGUnLFxyXG5cdCgkc2NvcGUpIC0+XHJcblx0XHRhcGlrZXkgPSAnMzl6ZlhHak94YjBSZlJoZE9vRnJYaDA4J1xyXG5cdFx0YmFpZHUuZnJvbnRpYS5pbml0IGFwaWtleVxyXG5cdFx0YmFpZHUuZnJvbnRpYS5zb2NpYWwuc2V0TG9naW5DYWxsYmFja1xyXG5cdFx0XHRzdWNjZXNzOiAodXNlcikgLT5cclxuXHRcdFx0XHQkc2NvcGUuJGFwcGx5IC0+XHJcblx0XHRcdFx0XHQkc2NvcGUuJHJvb3QudXNlciA9XHJcblx0XHRcdFx0XHRcdG5hbWU6IHVzZXIuZ2V0TmFtZSgpXHJcblx0XHRcdFx0XHRcdG1lZGlhVHlwZTogdXNlci5nZXRNZWRpYVR5cGUoKVxyXG5cdFx0XHRlcnJvcjogKGVycm9yKSAtPlxyXG5cdFx0XHRcdGNvbnNvbGUubG9nIGVycm9yXHJcblx0XHRcdFx0JHNjb3BlLiRyb290LnVzZXIgPSBudWxsXHJcblxyXG5cdFx0aW5pdCA9IC0+XHJcblx0XHRcdHVzZXIgPSBiYWlkdS5mcm9udGlhLmdldEN1cnJlbnRBY2NvdW50KClcclxuXHRcdFx0aWYgIXVzZXIgb3IgdXNlci5nZXRUeXBlKCkgIT0gJ3VzZXInXHJcblx0XHRcdGVsc2VcclxuXHRcdFx0XHQkc2NvcGUuJHJvb3QudXNlciA9XHJcblx0XHRcdFx0XHRuYW1lOiB1c2VyLmdldE5hbWUoKVxyXG5cdFx0XHRcdFx0bWVkaWFUeXBlOiB1c2VyLmdldE1lZGlhVHlwZSgpXHJcblx0XHRcdFx0XHRhY2Nlc3NUb2tlbjogdXNlci5nZXRBY2Nlc3NUb2tlbigpXHJcblxyXG5cdFx0JHNjb3BlLiRyb290LnVzZXIgPSBudWxsXHJcblxyXG5cdFx0JHNjb3BlLmxvZ2luID0gKG1lZGlhVHlwZSkgLT5cclxuXHRcdFx0b3B0aW9ucyA9XHJcblx0XHRcdFx0cmVzcG9uc2VfdHlwZTogJ3Rva2VuJ1xyXG5cdFx0XHRcdG1lZGlhX3R5cGU6IG1lZGlhVHlwZSB8fCAnYmFpZHUnXHJcblx0XHRcdFx0cmVkaXJlY3RfdXJpOiBpZiB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPSAnMTI3LjAuMC4xJ1xyXG5cdFx0XHRcdFx0XHQnaHR0cDovLzEyNy4wLjAuMTo3ODkwL2RlYnVnJ1xyXG5cdFx0XHRcdFx0ZWxzZSBpZiB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT0gJ2pvcy5qZWRpc3RvLmNvbSdcclxuXHRcdFx0XHRcdFx0J2h0dHA6Ly9qb3MuamVkaXN0by5jb20nXHJcblx0XHRcdFx0XHRlbHNlIGlmIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSA9PSAnZGFuaWVsa2luZy5naXRodWIuaW8nXHJcblx0XHRcdFx0XHRcdCdodHRwOi8vZGFuaWVsa2luZy5naXRodWIuaW8vam9zJ1xyXG5cdFx0XHRcdGNsaWVudF90eXBlOiAnd2ViJ1xyXG5cdFx0XHRcdHNjb3BlOiAnbmV0ZGlzaydcclxuXHRcdFx0YmFpZHUuZnJvbnRpYS5zb2NpYWwubG9naW4gb3B0aW9uc1xyXG5cclxuXHRcdCRzY29wZS4kcm9vdC5sb2dvdXQgPSAtPlxyXG5cdFx0XHRib290Ym94LmNvbmZpcm0gJ0NvbmZpcm1lZCB0byBsb2dvdXQ/JywgKGNvbmZpcm1lZCkgLT5cclxuXHRcdFx0XHRpZiBjb25maXJtZWRcclxuXHRcdFx0XHRcdCRzY29wZS4kYXBwbHkgLT5cclxuXHRcdFx0XHRcdFx0d2luZG93LmxvY2F0aW9uID0gJyMnXHJcblx0XHRcdFx0XHRcdGJhaWR1LmZyb250aWEubG9nT3V0Q3VycmVudEFjY291bnQoKVxyXG5cdFx0XHRcdFx0XHQkc2NvcGUuJHJvb3QudXNlciA9IG51bGxcclxuXHJcblx0XHQkc2NvcGUubGlzdCA9IC0+XHJcblx0XHRcdGJhaWR1LmZyb250aWEucGVyc29uYWxTdG9yYWdlLmxpc3RGaWxlICcvYXBwcy9qZWRpb3MvJyxcclxuXHRcdFx0XHRzdWNjZXNzOiAoZGF0YSkgLT5cclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nIGRhdGFcclxuXHRcdFx0XHRlcnJvcjogKGVycm9yKSAtPlxyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2cgZXJyb3JcclxuXHJcblx0XHQkc2NvcGUudGVzdCA9IC0+XHJcblx0XHRcdGJhaWR1LmZyb250aWEucGVyc29uYWxTdG9yYWdlLm1ha2VEaXIgJy9hcHBzL2plZGlvcy9oZWxsbycsXHJcblx0XHRcdFx0c3VjY2VzczogKGRhdGEpIC0+XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyBkYXRhXHJcblx0XHRcdFx0ZXJyb3I6IChlcnJvcikgLT5cclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nIGVycm9yXHJcblxyXG5cdFx0aW5pdCgpXHJcbl0iXX0=