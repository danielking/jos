(function() {
  var jos;

  jos = angular.module('jos');

  jos.controller('SessionController', [
    '$scope', function($scope) {
      var apikey, init;
      apikey = '39zfXGjOxb0RfRhdOoFrXh08';
      baidu.frontia.init(apikey);
      baidu.frontia.social.setLoginCallback({
        success: function(user) {
          return $scope.$apply(function() {
            return $scope.$root.user = {
              name: user.getName(),
              mediaType: user.getMediaType()
            };
          });
        },
        error: function(error) {
          console.log(error);
          return $scope.$root.user = null;
        }
      });
      init = function() {
        var user;
        user = baidu.frontia.getCurrentAccount();
        if (!user || user.getType() !== 'user') {

        } else {
          return $scope.$root.user = {
            name: user.getName(),
            mediaType: user.getMediaType(),
            accessToken: user.getAccessToken()
          };
        }
      };
      $scope.$root.user = null;
      $scope.login = function(mediaType) {
        var options;
        options = {
          response_type: 'token',
          media_type: mediaType || 'baidu',
          redirect_uri: window.location.hostname === '127.0.0.1' ? 'http://127.0.0.1:7890/debug' : window.location.hostname === 'jos.jedisto.com' ? 'http://jos.jedisto.com' : window.location.hostname === 'danielking.github.io' ? 'http://danielking.github.io/jos' : void 0,
          client_type: 'web',
          scope: 'netdisk'
        };
        return baidu.frontia.social.login(options);
      };
      $scope.$root.logout = function() {
        return bootbox.confirm('Confirmed to logout?', function(confirmed) {
          if (confirmed) {
            return $scope.$apply(function() {
              window.location = '#';
              baidu.frontia.logOutCurrentAccount();
              return $scope.$root.user = null;
            });
          }
        });
      };
      $scope.list = function() {
        return baidu.frontia.personalStorage.listFile('/apps/jedios/', {
          success: function(data) {
            return console.log(data);
          },
          error: function(error) {
            return console.log(error);
          }
        });
      };
      $scope.test = function() {
        return baidu.frontia.personalStorage.makeDir('/apps/jedios/hello', {
          success: function(data) {
            return console.log(data);
          },
          error: function(error) {
            return console.log(error);
          }
        });
      };
      return init();
    }
  ]);

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXJzXFxzZXNzaW9uLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBLE1BQUEsR0FBQTs7QUFBQSxFQUFBLEdBQUEsR0FBTSxPQUFPLENBQUMsTUFBUixDQUFlLEtBQWYsQ0FBTixDQUFBOztBQUFBLEVBQ0EsR0FBRyxDQUFDLFVBQUosQ0FBZSxtQkFBZixFQUFvQztJQUNuQyxRQURtQyxFQUVuQyxTQUFDLE1BQUQsR0FBQTtBQUNDLFVBQUEsWUFBQTtBQUFBLE1BQUEsTUFBQSxHQUFTLDBCQUFULENBQUE7QUFBQSxNQUNBLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBZCxDQUFtQixNQUFuQixDQURBLENBQUE7QUFBQSxNQUVBLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLGdCQUFyQixDQUNDO0FBQUEsUUFBQSxPQUFBLEVBQVMsU0FBQyxJQUFELEdBQUE7aUJBQ1IsTUFBTSxDQUFDLE1BQVAsQ0FBYyxTQUFBLEdBQUE7bUJBQ2IsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFiLEdBQ0M7QUFBQSxjQUFBLElBQUEsRUFBTSxJQUFJLENBQUMsT0FBTCxDQUFBLENBQU47QUFBQSxjQUNBLFNBQUEsRUFBVyxJQUFJLENBQUMsWUFBTCxDQUFBLENBRFg7Y0FGWTtVQUFBLENBQWQsRUFEUTtRQUFBLENBQVQ7QUFBQSxRQUtBLEtBQUEsRUFBTyxTQUFDLEtBQUQsR0FBQTtBQUNOLFVBQUEsT0FBTyxDQUFDLEdBQVIsQ0FBWSxLQUFaLENBQUEsQ0FBQTtpQkFDQSxNQUFNLENBQUMsS0FBSyxDQUFDLElBQWIsR0FBb0IsS0FGZDtRQUFBLENBTFA7T0FERCxDQUZBLENBQUE7QUFBQSxNQVlBLElBQUEsR0FBTyxTQUFBLEdBQUE7QUFDTixZQUFBLElBQUE7QUFBQSxRQUFBLElBQUEsR0FBTyxLQUFLLENBQUMsT0FBTyxDQUFDLGlCQUFkLENBQUEsQ0FBUCxDQUFBO0FBQ0EsUUFBQSxJQUFHLENBQUEsSUFBQSxJQUFTLElBQUks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ZS8iLCJzb3VyY2VzQ29udGVudCI6WyJqb3MgPSBhbmd1bGFyLm1vZHVsZSAnam9zJ1xyXG5qb3MuY29udHJvbGxlciAnU2Vzc2lvbkNvbnRyb2xsZXInLCBbXHJcblx0JyRzY29wZScsXHJcblx0KCRzY29wZSkgLT5cclxuXHRcdGFwaWtleSA9ICczOXpmWEdqT3hiMFJmUmhkT29GclhoMDgnXHJcblx0XHRiYWlkdS5mcm9udGlhLmluaXQgYXBpa2V5XHJcblx0XHRiYWlkdS5mcm9udGlhLnNvY2lhbC5zZXRMb2dpbkNhbGxiYWNrXHJcblx0XHRcdHN1Y2Nlc3M6ICh1c2VyKSAtPlxyXG5cdFx0XHRcdCRzY29wZS4kYXBwbHkgLT5cclxuXHRcdFx0XHRcdCRzY29wZS4kcm9vdC51c2VyID1cclxuXHRcdFx0XHRcdFx0bmFtZTogdXNlci5nZXROYW1lKClcclxuXHRcdFx0XHRcdFx0bWVkaWFUeXBlOiB1c2VyLmdldE1lZGlhVHlwZSgpXHJcblx0XHRcdGVycm9yOiAoZXJyb3IpIC0+XHJcblx0XHRcdFx0Y29uc29sZS5sb2cgZXJyb3JcclxuXHRcdFx0XHQkc2NvcGUuJHJvb3QudXNlciA9IG51bGxcclxuXHJcblx0XHRpbml0ID0gLT5cclxuXHRcdFx0dXNlciA9IGJhaWR1LmZyb250aWEuZ2V0Q3VycmVudEFjY291bnQoKVxyXG5cdFx0XHRpZiAhdXNlciBvciB1c2VyLmdldFR5cGUoKSAhPSAndXNlcidcclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHRcdCRzY29wZS4kcm9vdC51c2VyID1cclxuXHRcdFx0XHRcdG5hbWU6IHVzZXIuZ2V0TmFtZSgpXHJcblx0XHRcdFx0XHRtZWRpYVR5cGU6IHVzZXIuZ2V0TWVkaWFUeXBlKClcclxuXHRcdFx0XHRcdGFjY2Vzc1Rva2VuOiB1c2VyLmdldEFjY2Vzc1Rva2VuKClcclxuXHJcblx0XHQkc2NvcGUuJHJvb3QudXNlciA9IG51bGxcclxuXHJcblx0XHQkc2NvcGUubG9naW4gPSAobWVkaWFUeXBlKSAtPlxyXG5cdFx0XHRvcHRpb25zID1cclxuXHRcdFx0XHRyZXNwb25zZV90eXBlOiAndG9rZW4nXHJcblx0XHRcdFx0bWVkaWFfdHlwZTogbWVkaWFUeXBlIHx8ICdiYWlkdSdcclxuXHRcdFx0XHRyZWRpcmVjdF91cmk6IGlmIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSA9PSAnMTI3LjAuMC4xJ1xyXG5cdFx0XHRcdFx0XHQnaHR0cDovLzEyNy4wLjAuMTo3ODkwL2RlYnVnJ1xyXG5cdFx0XHRcdFx0ZWxzZSBpZiB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT0gJ2pvcy5qZWRpc3RvLmNvbSdcclxuXHRcdFx0XHRcdFx0J2h0dHA6Ly9qb3MuamVkaXN0by5jb20nXHJcblx0XHRcdFx0XHRlbHNlIGlmIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSA9PSAnZGFuaWVsa2luZy5naXRodWIuaW8nXHJcblx0XHRcdFx0XHRcdCdodHRwOi8vZGFuaWVsa2luZy5naXRodWIuaW8vam9zJ1xyXG5cdFx0XHRcdGNsaWVudF90eXBlOiAnd2ViJ1xyXG5cdFx0XHRcdHNjb3BlOiAnbmV0ZGlzaydcclxuXHRcdFx0YmFpZHUuZnJvbnRpYS5zb2NpYWwubG9naW4gb3B0aW9uc1xyXG5cclxuXHRcdCRzY29wZS4kcm9vdC5sb2dvdXQgPSAtPlxyXG5cdFx0XHRib290Ym94LmNvbmZpcm0gJ0NvbmZpcm1lZCB0byBsb2dvdXQ/JywgKGNvbmZpcm1lZCkgLT5cclxuXHRcdFx0XHRpZiBjb25maXJtZWRcclxuXHRcdFx0XHRcdCRzY29wZS4kYXBwbHkgLT5cclxuXHRcdFx0XHRcdFx0d2luZG93LmxvY2F0aW9uID0gJyMnXHJcblx0XHRcdFx0XHRcdGJhaWR1LmZyb250aWEubG9nT3V0Q3VycmVudEFjY291bnQoKVxyXG5cdFx0XHRcdFx0XHQkc2NvcGUuJHJvb3QudXNlciA9IG51bGxcclxuXHJcblx0XHQkc2NvcGUubGlzdCA9IC0+XHJcblx0XHRcdGJhaWR1LmZyb250aWEucGVyc29uYWxTdG9yYWdlLmxpc3RGaWxlICcvYXBwcy9qZWRpb3MvJyxcclxuXHRcdFx0XHRzdWNjZXNzOiAoZGF0YSkgLT5cclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nIGRhdGFcclxuXHRcdFx0XHRlcnJvcjogKGVycm9yKSAtPlxyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2cgZXJyb3JcclxuXHJcblx0XHQkc2NvcGUudGVzdCA9IC0+XHJcblx0XHRcdGJhaWR1LmZyb250aWEucGVyc29uYWxTdG9yYWdlLm1ha2VEaXIgJy9hcHBzL2plZGlvcy9oZWxsbycsXHJcblx0XHRcdFx0c3VjY2VzczogKGRhdGEpIC0+XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyBkYXRhXHJcblx0XHRcdFx0ZXJyb3I6IChlcnJvcikgLT5cclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nIGVycm9yXHJcblxyXG5cdFx0aW5pdCgpXHJcbl0iXX0=